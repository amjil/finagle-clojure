<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>finagle-clojure.futures documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Finagle-clojure 0.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><a href="finagle-clojure.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>finagle-clojure</span></div></a></li><li class="depth-2 branch"><a href="finagle-clojure.future-pool.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>future-pool</span></div></a></li><li class="depth-2 branch current"><a href="finagle-clojure.futures.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>futures</span></div></a></li><li class="depth-2"><a href="finagle-clojure.scala.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scala</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="finagle-clojure.futures.html#var-await"><div class="inner"><span>await</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-collect"><div class="inner"><span>collect</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-defined.3F"><div class="inner"><span>defined?</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-ensure"><div class="inner"><span>ensure</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-ensure*"><div class="inner"><span>ensure*</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-exception"><div class="inner"><span>exception</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-flatmap"><div class="inner"><span>flatmap</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-flatmap*"><div class="inner"><span>flatmap*</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-for"><div class="inner"><span>for</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-handle"><div class="inner"><span>handle</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-handle*"><div class="inner"><span>handle*</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-map"><div class="inner"><span>map</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-map*"><div class="inner"><span>map*</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-rescue"><div class="inner"><span>rescue</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-rescue*"><div class="inner"><span>rescue*</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-select"><div class="inner"><span>select</span></div></a></li><li class="depth-1"><a href="finagle-clojure.futures.html#var-value"><div class="inner"><span>value</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">finagle-clojure.futures</h2><div class="doc"><div class="markdown"><p>Functions for working with com.twitter.util.Future objects. Futures are used to represent asynchronous operations in Finagle.</p></div></div><div class="public anchor" id="var-await"><h3>await</h3><div class="usage"><code>(await f)</code></div><div class="doc"><div class="markdown"><p>Block until Future f is defined and return its value. You probably don&rsquo;t want to use this in production code.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>f</code>: a Future</li>
</ul><p><em>Returns</em>:  The value of <code>f</code> if it was successful.  Throws the contained Exception if <code>f</code> was unsuccessful.</p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L49">view source</a></div></div><div class="public anchor" id="var-collect"><h3>collect</h3><div class="usage"><code>(collect future-seq)</code></div><div class="doc"><div class="markdown"><p>Takes a seq of Futures, returns a Future of a seq of their values.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>future-seq</code>: a Clojure seq of Futures</li>
</ul><p><em>Returns</em>:</p><p>A new Future that will be defined when all Futures in <code>future-seq</code> have been defined.  The value of that Future will be a Clojure seq of the values of the Futures in <code>future-seq</code>.</p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L156">view source</a></div></div><div class="public anchor" id="var-defined.3F"><h3>defined?</h3><div class="usage"><code>(defined? f)</code></div><div class="doc"><div class="markdown"><p>Does Future <code>f</code> have a value? If defined? the value of Future f can be retrieved with the function <a href="finagle-clojure.futures.html#var-await">await</a>.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>f</code>: a Future</li>
</ul><p><em>Returns</em>:</p>
<ul>
  <li><code>true</code> if f has been realized (has a Return or Throw value)</li>
  <li><code>false</code> if it&rsquo;s still waiting for a value.</li>
</ul></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L34">view source</a></div></div><div class="public anchor" id="var-ensure"><h3>ensure</h3><h4 class="type">macro</h4><div class="usage"><code>(ensure f &amp; body)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L270">view source</a></div></div><div class="public anchor" id="var-ensure*"><h3>ensure*</h3><div class="usage"><code>(ensure* f fn0)</code></div><div class="doc"><div class="markdown"><p>Apply scala.Function0 <code>fn0</code> when Future <code>f</code> is defined whether it is successful or not. This is primarily used for side-effects, the return value of <code>fn0</code> is ignored.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>f</code>: a Future</li>
  <li><code>fn0</code>: a <code>scala.Function0</code> that will execute when the value of f is defined.</li>
</ul><p><em>Returns</em>:</p><p>A new Future that will be defined when <code>f</code> is defined and <code>fn0</code> has executed.</p><p>See <a href="finagle-clojure.scala.html#var-Function0">scala/Function0</a></p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L253">view source</a></div></div><div class="public anchor" id="var-exception"><h3>exception</h3><div class="usage"><code>(exception t)</code></div><div class="doc"><div class="markdown"><p>Returns a defined Future with a Throw value of t.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>t</code>: an instance of Throwable that the new Future should be defined with.</li>
</ul><p><em>Returns</em>:</p><p>A new Future that is defined with the Throw value <code>t</code>.</p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L21">view source</a></div></div><div class="public anchor" id="var-flatmap"><h3>flatmap</h3><h4 class="type">macro</h4><div class="usage"><code>(flatmap f param-binding &amp; body)</code></div><div class="doc"><div class="markdown"><p>Sugar for constructing a scala.Function1 &amp; applying <a href="finagle-clojure.futures.html#var-flatmap*">flatmap*</a> with it.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>f</code>: a Future</li>
  <li><code>param-binding</code>: is a vector with 1 element, the name to bind the value of Future f.</li>
  <li><code>body</code>: will execute when the (non-error) value of f is defined.  Its result should be a Future.</li>
</ul><p><em>Returns</em>:</p><p>A new Future that will be defined when <code>f</code> is defined and <code>body</code> has been applied to its value.  The value of the new Future will be the result of <code>body</code> (which should be a Future) if <code>f</code> is successful.  If <code>f</code> results in an error then <code>body</code> won&rsquo;t run.</p><p>See <a href="finagle-clojure.futures.html#var-flatmap*">flatmap*</a> &amp; <a href="finagle-clojure.scala.html#var-Function">scala/Function</a></p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L83">view source</a></div></div><div class="public anchor" id="var-flatmap*"><h3>flatmap*</h3><div class="usage"><code>(flatmap* f fn1)</code></div><div class="doc"><div class="markdown"><p>Apply scala.Function1 fn1 with the value of Future f when f is defined with a value (not exception). fn1 should return a Future.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>f</code>: a Future</li>
  <li><code>fn1</code>: a <code>scala.Function1</code> that will execute when the (non-error) value of f is defined. Its result should be a Future.</li>
</ul><p><em>Returns</em>:</p><p>A new Future that will be defined when <code>f</code> is defined and <code>fn1</code> has been applied to its value.  The value of the new Future will be the result of <code>fn1</code> (which should be a Future) if <code>f</code> is successful.  If <code>f</code> results in an error then <code>fn1</code> won&rsquo;t run.</p><p>See <a href="finagle-clojure.scala.html#var-Function">scala/Function</a></p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L63">view source</a></div></div><div class="public anchor" id="var-for"><h3>for</h3><h4 class="type">macro</h4><div class="usage"><code>(for bindings &amp; body)</code></div><div class="doc"><div class="markdown"><p>Like a scala for comprehension with Futures, bindings are pairs of name future, body is executed when all Futures are ready. Bindings can refer to Futures defined before them (which will be realized).</p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L142">view source</a></div></div><div class="public anchor" id="var-handle"><h3>handle</h3><h4 class="type">macro</h4><div class="usage"><code>(handle f arg-binding &amp; body)</code></div><div class="doc"><div class="markdown"><p>Sugar for constructing a scala.PartialFunction &amp; applying <a href="finagle-clojure.futures.html#var-handle*">handle*</a> with it. This is like <a href="finagle-clojure.futures.html#var-map">map</a> for when a Future results in an error.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>f</code>: a Future</li>
  <li><code>param-binding</code>: is a vector with 1 element, the name to bind the value of Future f.</li>
  <li><code>body</code>: will execute when the (error) value of f is defined. The return value should be a Future.</li>
</ul><p><em>Returns</em>:</p><p>A new Future that will be defined when <code>f</code> is defined and <code>body</code> has been applied to its value.  The value of the new Future will be the result of <code>body</code> if <code>f</code> results in an error.  If <code>f</code> is successful then <code>body</code> won&rsquo;t run.</p><p>See <a href="finagle-clojure.futures.html#var-handle*">handle*</a> &amp; <a href="finagle-clojure.scala.html#var-Function">scala/Function</a></p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L232">view source</a></div></div><div class="public anchor" id="var-handle*"><h3>handle*</h3><div class="usage"><code>(handle* f pfn)</code></div><div class="doc"><div class="markdown"><p>Apply scala.PartialFunction pfn with the value of Future f when f is defined with a Throw (a Throwable). This is like <a href="finagle-clojure.futures.html#var-map*">map*</a> for when a Future results in an error.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>f</code>: a Future</li>
  <li><code>pfn</code>: a <code>scala.PartialFunction</code> that will execute when the value of f is defined (as a Throwable).</li>
</ul><p><em>Returns</em>:</p><p>A new Future that will be defined when <code>f</code> is defined and <code>pfn</code> has been applied to its value.  The value of the new Future will be the result of <code>pfn</code> if <code>f</code> results in an error.  If <code>f</code> is successful then <code>pfn</code> won&rsquo;t run.</p><p>See <a href="finagle-clojure.scala.html#var-Function">scala/Function</a></p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L213">view source</a></div></div><div class="public anchor" id="var-map"><h3>map</h3><h4 class="type">macro</h4><div class="usage"><code>(map f param-binding &amp; body)</code></div><div class="doc"><div class="markdown"><p>Sugar for constructing a scala.Function1 &amp; applying <a href="finagle-clojure.futures.html#var-map*">map*</a> with it.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>f</code>: a Future</li>
  <li><code>param-binding</code>: is a vector with 1 element, the name to bind the value of Future f.</li>
  <li><code>body</code>: will execute when the (non-error) value of f is defined.</li>
</ul><p><em>Returns</em>:</p><p>A new Future that will be defined when <code>f</code> is defined and <code>body</code> has been applied to its value.  The value of the new Future will be the result of <code>body</code> if <code>f</code> is successful.  If <code>f</code> results in an error then <code>body</code> won&rsquo;t run.</p><p>See <a href="finagle-clojure.futures.html#var-map*">map*</a> &amp; <a href="finagle-clojure.scala.html#var-Function">scala/Function</a></p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L121">view source</a></div></div><div class="public anchor" id="var-map*"><h3>map*</h3><div class="usage"><code>(map* f fn1)</code></div><div class="doc"><div class="markdown"><p>Apply scala.Function1 fn1 with the value of Future f when f is defined with a value (not exception).</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>f</code>: a Future</li>
  <li><code>fn1</code>: a <code>scala.Function1</code> that will execute when the (non-error) value of f is defined.</li>
</ul><p><em>Returns</em>:</p><p>A new Future that will be defined when <code>f</code> is defined and <code>fn1</code> has been applied to its value.  The value of the new Future will be the result of <code>fn1</code> if <code>f</code> is successful.  If <code>f</code> results in an error then <code>fn1</code> won&rsquo;t run.</p><p>See <a href="finagle-clojure.scala.html#var-Function">scala/Function</a></p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L103">view source</a></div></div><div class="public anchor" id="var-rescue"><h3>rescue</h3><h4 class="type">macro</h4><div class="usage"><code>(rescue f arg-binding &amp; body)</code></div><div class="doc"><div class="markdown"><p>Sugar for constructing a scala.PartialFunction &amp; applying <a href="finagle-clojure.futures.html#var-rescue*">rescue*</a> with it. This is like <a href="finagle-clojure.futures.html#var-flatmap">flatmap</a> for when a Future results in an error.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>f</code>: a Future</li>
  <li><code>param-binding</code>: is a vector with 1 element, the name to bind the value of Future f.</li>
  <li><code>body</code>: will execute when the (error) value of f is defined. The return value should be a Future.</li>
</ul><p><em>Returns</em>:</p><p>A new Future that will be defined when <code>f</code> is defined and <code>body</code> has been applied to its value.  The value of the new Future will be the result of <code>body</code> if <code>f</code> results in an error.  If <code>f</code> is successful then <code>body</code> won&rsquo;t run.</p><p>See <a href="finagle-clojure.futures.html#var-rescue*">rescue*</a> &amp; <a href="finagle-clojure.scala.html#var-Function">scala/Function</a></p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L192">view source</a></div></div><div class="public anchor" id="var-rescue*"><h3>rescue*</h3><div class="usage"><code>(rescue* f pfn)</code></div><div class="doc"><div class="markdown"><p>Apply scala.PartialFunction pfn with the value of Future f when f is defined with a Throw (a Throwable). This is like <a href="finagle-clojure.futures.html#var-flatmap*">flatmap*</a> for when a Future results in an error.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>f</code>: a Future</li>
  <li><code>pfn</code>: a <code>scala.PartialFunction</code> that will execute when the value of f is defined (as a Throwable). The return value should be a Future.</li>
</ul><p><em>Returns</em>:</p><p>A new Future that will be defined when <code>f</code> is defined and <code>pfn</code> has been applied to its value.  The value of the new Future will be the result of <code>pfn</code> if <code>f</code> results in an error.  If <code>f</code> is successful then <code>pfn</code> won&rsquo;t run.</p><p>See <a href="finagle-clojure.scala.html#var-Function">scala/Function</a></p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L172">view source</a></div></div><div class="public anchor" id="var-select"><h3>select</h3><div class="usage"><code>(select f1 f2)</code></div><div class="doc"><div class="markdown"><p><em>Arguments</em>:</p>
<ul>
  <li><code>f1</code>: a Future</li>
  <li><code>f2</code>: a Future</li>
</ul><p><em>Returns</em>:</p><p>A new Future that will be defined with the value of the Future that returns first (between <code>f1</code> &amp; <code>f2</code>).</p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L288">view source</a></div></div><div class="public anchor" id="var-value"><h3>value</h3><div class="usage"><code>(value v)</code></div><div class="doc"><div class="markdown"><p>Returns a defined Future with the constant Return value <code>v</code>.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>v</code>: the value that the new Future should be defined with.</li>
</ul><p><em>Returns</em>:</p><p>A new Future that is defined with the value <code>v</code>.</p></div></div><div class="src-link"><a href="http://github.com/samn/finagle-clojure/blob/master/core/src/finagle_clojure/futures.clj#L8">view source</a></div></div></div></body></html>