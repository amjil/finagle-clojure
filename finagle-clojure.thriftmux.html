<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>finagle-clojure.thriftmux documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Finagle-clojure 0.2.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>finagle-clojure</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>builder</span></div></div></li><li class="depth-3 branch"><a href="finagle-clojure.builder.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-3"><a href="finagle-clojure.builder.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-2 branch"><a href="finagle-clojure.duration.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>duration</span></div></a></li><li class="depth-2 branch"><a href="finagle-clojure.filter.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>filter</span></div></a></li><li class="depth-2 branch"><a href="finagle-clojure.future-pool.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>future-pool</span></div></a></li><li class="depth-2 branch"><a href="finagle-clojure.futures.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>futures</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>builder</span></div></div></li><li class="depth-4"><a href="finagle-clojure.http.builder.codec.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>codec</span></div></a></li><li class="depth-3 branch"><a href="finagle-clojure.http.client.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-3 branch"><a href="finagle-clojure.http.message.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>message</span></div></a></li><li class="depth-3"><a href="finagle-clojure.http.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-2 branch"><a href="finagle-clojure.options.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>options</span></div></a></li><li class="depth-2 branch"><a href="finagle-clojure.scala.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scala</span></div></a></li><li class="depth-2 branch"><a href="finagle-clojure.service.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>service</span></div></a></li><li class="depth-2 branch"><a href="finagle-clojure.thrift.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>thrift</span></div></a></li><li class="depth-2 branch current"><a href="finagle-clojure.thriftmux.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>thriftmux</span></div></a></li><li class="depth-2"><a href="finagle-clojure.timer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>timer</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="finagle-clojure.thriftmux.html#var-announce"><div class="inner"><span>announce</span></div></a></li><li class="depth-1"><a href="finagle-clojure.thriftmux.html#var-announce*"><div class="inner"><span>announce*</span></div></a></li><li class="depth-1"><a href="finagle-clojure.thriftmux.html#var-client"><div class="inner"><span>client</span></div></a></li><li class="depth-1"><a href="finagle-clojure.thriftmux.html#var-serve"><div class="inner"><span>serve</span></div></a></li><li class="depth-1"><a href="finagle-clojure.thriftmux.html#var-service"><div class="inner"><span>service</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">finagle-clojure.thriftmux</h2><div class="doc"><div class="markdown"><p>Functions for creating ThriftMux clients &amp; servers from Java classes generated from a Thrift service definition using <a href="https://twitter.github.io/scrooge/">Scrooge</a>.</p><p>The lein-finagle-clojure plugin can be used to compile Thrift definitions to Java with Scrooge.</p><p>See: * test/clj/finagle_clojure/thriftmux_test.clj</p></div></div><div class="public anchor" id="var-announce"><h3>announce</h3><div class="usage"><code>(announce path server)</code></div><div class="doc"><div class="markdown"><p>Announce this server to the configured load balancer.</p><p>This functions the same as <a href="finagle-clojure.thriftmux.html#var-announce*">announce*</a> but returns the <code>server</code> passed in so it can be chained together like:</p>
<pre><code class="clojure">(-&gt;&gt; service
     (thriftmux/serve &quot;:9999&quot;)
     (thriftmux/announce &quot;zk!localhost!/path/to/nodes&quot;)
     (f/await))
</code></pre><p><em>Arguments</em>: * <code>path</code>: a String representing the path on the load balancer * <code>server</code>: a ListeningServer (returned by [serve])</p><p><em>Returns</em>:</p><p><code>server</code></p><p><em>See</em>: <a href="finagle-clojure.thriftmux.html#var-announce*">announce*</a>, [https://twitter.github.io/finagle/guide/Names.html]</p></div></div><div class="src-link"><a href="https://github.com/finagle/finagle-clojure/blob/v0.2.0/thriftmux/src/finagle_clojure/thriftmux.clj#L71">view source</a></div></div><div class="public anchor" id="var-announce*"><h3>announce*</h3><div class="usage"><code>(announce* path server)</code></div><div class="doc"><div class="markdown"><p>Announce this server to the configured load balancer.</p><p><em>Arguments</em>: * <code>path</code>: a String represent the path on the load balancer * <code>server</code>: a ListeningServer (returned by [serve])</p><p><em>Returns</em>:</p><p>A Future[Announcement].</p><p><em>See</em>: <a href="finagle-clojure.thriftmux.html#var-announce">announce</a>, [https://twitter.github.io/finagle/guide/Names.html]</p></div></div><div class="src-link"><a href="https://github.com/finagle/finagle-clojure/blob/v0.2.0/thriftmux/src/finagle_clojure/thriftmux.clj#L55">view source</a></div></div><div class="public anchor" id="var-client"><h3>client</h3><h4 class="type">macro</h4><div class="usage"><code>(client addr client-iterface-class)</code></div><div class="doc"><div class="markdown"><p>Sugar for creating a client for a compiled ThriftMux service. The appropriate Finagle interface for that class will automatically be imported. Note that operations on this client will return a Future representing the result of an call This is meant to show that this client can make an RPC call and may be expensive to invoke.</p><p>E.g. if a ThriftMux service definition has a method called <code>doStuff</code> you can call it on a client like this <code>(.doStuff client)</code>. </p><p><em>Arguments</em>:</p>
<ul>
  <li><code>addr</code>: Where to find the ThriftMux server.</li>
  <li><code>qualified-service-class-name</code>: This class&rsquo;s Finagled interface will automatically be imported.  e.g. if you pass MyService then MyService$ServiceIface will be imported and used.</li>
</ul><p><em>Returns</em>:</p><p>A new client.</p></div></div><div class="src-link"><a href="https://github.com/finagle/finagle-clojure/blob/v0.2.0/thriftmux/src/finagle_clojure/thriftmux.clj#L98">view source</a></div></div><div class="public anchor" id="var-serve"><h3>serve</h3><div class="usage"><code>(serve addr service)</code></div><div class="doc"><div class="markdown"><p>Serve <code>service</code> on <code>addr</code>. Use this to actually run your ThriftMux service. Note that this will not block while serving. If you want to wait on this use <a href="finagle-clojure.futures.html#var-await">finagle-clojure.futures/await</a>.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>addr</code>: The port on which to serve.</li>
  <li><code>service</code>: The Service that should be served.</li>
</ul><p><em>Returns</em>:</p><p>A new com.twitter.finagle.ListeningServer.</p></div></div><div class="src-link"><a href="https://github.com/finagle/finagle-clojure/blob/v0.2.0/thriftmux/src/finagle_clojure/thriftmux.clj#L39">view source</a></div></div><div class="public anchor" id="var-service"><h3>service</h3><h4 class="type">macro</h4><div class="usage"><code>(service service-class-name &amp; body)</code></div><div class="doc"><div class="markdown"><p>Sugar for implementing a com.twitter.finagle.Service based on the interface defined in <code>qualified-service-class-name</code>. The appropriate Finagle interface for that class will automatically be imported. Provide an implementation for it like <code>proxy</code> (<code>this</code> is an implicit argument).</p><p>The Finagle interface for a Service class generated by Scrooge will wrap the response type of a method in Future so it is asynchronous.</p><p><em>Arguments</em>:</p>
<ul>
  <li><code>qualified-service-class-name</code>: This class&rsquo;s Finagled interface will automatically be imported.  e.g. if you pass MyService then MyService$ServiceIface will be imported and used.</li>
  <li><code>body</code>: the implementation of this service. Methods should be defined without an explicit <code>this</code> argument.</li>
</ul><p><em>Returns</em>:</p><p>A new <code>Service</code>.</p></div></div><div class="src-link"><a href="https://github.com/finagle/finagle-clojure/blob/v0.2.0/thriftmux/src/finagle_clojure/thriftmux.clj#L15">view source</a></div></div></div></body></html>